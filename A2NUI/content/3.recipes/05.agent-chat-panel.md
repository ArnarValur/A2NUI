---
title: Agent Chat Panel
description: AI agent chat with inline A2UI rendering inside DashboardPanel — the convergence of chat and interactive business dashboards.
---

# Agent Chat Panel

A prototype demonstrating how an **AI agent** renders interactive A2UI surfaces directly inside a chat conversation, hosted within Nuxt UI's `DashboardPanel`.

This is the architectural pattern for embedding AI-generated UIs in your admin and business portals.

## The Architecture

```
DashboardPanel
├── #header  →  Agent branding + status indicator
├── #body    →  Chat messages (scrollable)
│   ├── User bubble (plain text)
│   └── Assistant message
│       ├── Text response
│       └── A2uiRenderer (inline surface)
│           └── Table / Cards / any A2UI composition
└── #footer  →  Chat prompt input
```

Each assistant message can contain **both text and A2UI JSONL**. The renderer processes the JSONL through `useA2uiSurface()` and renders the resulting surface directly inside the chat flow. The user sees rich, interactive components—tables, stat cards, slideovers—inline with the conversation.

## Live Demo

Visit [/agent](/agent) to interact with the prototype.

**Try these commands (in Norwegian):**

| Command                   | What the Agent Renders                 |
| ------------------------- | -------------------------------------- |
| `Vis dagens bestillinger` | Booking table with 5 columns × 5 rows  |
| `Vis ukens omsetning`     | 3 stat cards + revenue breakdown table |
| `Vis ansatte i dag`       | Staff roster table                     |
| `Hjelp`                   | 4-card grid of capabilities            |

## Data Flow

```
1. User types "Vis dagens bestillinger"
2. Message added to chat (user role)
3. Agent processes intent [mock: keyword match / prod: WebSocket → Agent]
4. Agent streams response:
   ├── Text: "Her er dagens bestillinger:"
   ├── A2UI: {"createSurface": ...}
   └── A2UI: {"updateComponents": ..., components: [Table, ...]}
5. onA2uiLine callback feeds each line in real-time
6. useA2uiSurface().feed() processes JSONL → Surface created
7. A2uiRenderer renders Surface inline within chat message
8. User sees interactive table inside the conversation
```

## Key Components

### `AgentChatPanel.vue`

The main component. Lives at `app/components/AgentChatPanel.vue`.

```vue
<UDashboardPanel :id="panelId" :resizable="resizable">
  <template #header> Agent branding + status </template>
  <template #body>
    <!-- Messages loop -->
    <div v-for="msg in messages">
      <!-- User bubbles -->
      <!-- Assistant: text + inline A2uiRenderer -->
      <A2uiRenderer
        v-if="surfaces.get(surfaceId)"
        :surface="surfaces.get(surfaceId)!"
      />
    </div>
  </template>
  <template #footer> Chat prompt </template>
</UDashboardPanel>
```

### `useAgentChat.ts`

Composable at `app/composables/useAgentChat.ts`. Currently uses canned responses with simulated streaming delays. In production, this becomes a WebSocket client.

Key design: the `onA2uiLine` callback feeds A2UI lines to the surface processor **during streaming**, so surfaces render progressively — not only after the response completes.

```ts
const { messages, status, send } = useAgentChat({
  onA2uiLine: (line) => feed(line), // real-time surface updates
});
```

## Production Evolution

The mock → production path is clean:

| Layer         | Mock (current)            | Production                           |
| ------------- | ------------------------- | ------------------------------------ |
| **Transport** | `setTimeout` delays       | WebSocket to agent backend           |
| **Intent**    | Keyword matching          | LLM intent classification            |
| **Response**  | Canned JSONL              | Agent generates JSONL from live data |
| **Data**      | Hardcoded Norwegian names | Database queries via agent tools     |
| **Panel**     | Standalone page           | Embedded in business-portal layout   |

The **component layer** (`AgentChatPanel.vue` + `A2uiRenderer`) stays exactly the same. Only the data source changes.
